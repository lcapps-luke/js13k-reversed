!function(t){"use strict";function e(t,e){var i=Object.create(t);for(var s in e)i[s]=e[s];return e.toString!==Object.prototype.toString&&(i.toString=e.toString),i}Math.__name__=!0;var i=function(){};i.__name__=!0,i.string=function(t){return c.__string_rec(t,"")},i.parseInt=function(t){if(null!=t)for(var e=0,i=t.length;e<i;){var s=e++,r=t.charCodeAt(s);if(r<=8||r>=14&&32!=r&&45!=r){var o=t.charCodeAt(s+1),h=parseInt(t,120==o||88==o?16:10);return isNaN(h)?null:h}}return null};var s=function(){};s.__name__=!0,s.__isInterface__=!0;var r=function(t,e,i){Error.call(this,t),this.message=t,this.__previousException=e,this.__nativeException=null!=i?i:this};r.__name__=!0,r.thrown=function(t){return t instanceof r?t.get_native():t instanceof Error?t:new o(t)},r.__super__=Error,r.prototype=e(Error.prototype,{get_native:function(){return this.__nativeException},__class__:r});var o=function(t,e,i){r.call(this,String(t),e,i),this.value=t};o.__name__=!0,o.__super__=r,o.prototype=e(r.prototype,{__class__:o});var h=function(){this.length=0};h.__name__=!0,h.prototype={add:function(t){var e=new a(t,null);null==this.h?this.h=e:this.q.next=e,this.q=e,this.length++},clear:function(){this.h=null,this.q=null,this.length=0},remove:function(t){for(var e=null,i=this.h;null!=i;){if(i.item==t)return null==e?this.h=i.next:e.next=i.next,this.q==i&&(this.q=e),this.length--,!0;e=i,i=i.next}return!1},__class__:h};var a=function(t,e){this.item=t,this.next=e};a.__name__=!0,a.prototype={__class__:a};var n=function(t){this.head=t};n.__name__=!0,n.prototype={hasNext:function(){return null!=this.head},next:function(){var t=this.head.item;return this.head=this.head.next,t},__class__:n};var l=function(){this.h=Object.create(null)};l.__name__=!0,l.__interfaces__=[s],l.prototype={__class__:l};var _=function(t){this.current=0,this.array=t};_.__name__=!0,_.prototype={hasNext:function(){return this.current<this.array.length},next:function(){return this.array[this.current++]},__class__:_};var c=function(){};c.__name__=!0,c.getClass=function(t){if(null==t)return null;if(t instanceof Array)return Array;var e=t.__class__;if(null!=e)return e;var i=c.__nativeClassName(t);return null!=i?c.__resolveNativeClass(i):null},c.__string_rec=function(t,e){if(null==t)return"null";if(e.length>=5)return"<...>";var i=typeof t;switch("function"==i&&(t.__name__||t.__ename__)&&(i="object"),i){case"function":return"<function>";case"object":if(t instanceof Array){var s="[";e+="\t";for(var r=0,o=t.length;r<o;){var h=r++;s+=(h>0?",":"")+c.__string_rec(t[h],e)}return s+="]"}var a;try{a=t.toString}catch(r){return"???"}if(null!=a&&a!=Object.toString&&"function"==typeof a){var n=t.toString();if("[object Object]"!=n)return n}s="{\n";e+="\t";var l=null!=t.hasOwnProperty,_=null;for(_ in t)l&&!t.hasOwnProperty(_)||"prototype"!=_&&"__class__"!=_&&"__super__"!=_&&"__interfaces__"!=_&&"__properties__"!=_&&(2!=s.length&&(s+=", \n"),s+=e+_+" : "+c.__string_rec(t[_],e));return s+="\n"+(e=e.substring(1))+"}";case"string":return t;default:return String(t)}},c.__interfLoop=function(t,e){if(null==t)return!1;if(t==e)return!0;var i=t.__interfaces__;if(null!=i)for(var s=0,r=i.length;s<r;){var o=i[s++];if(o==e||c.__interfLoop(o,e))return!0}return c.__interfLoop(t.__super__,e)},c.__instanceof=function(t,e){if(null==e)return!1;switch(e){case Array:return t instanceof Array;case Q:return"boolean"==typeof t;case A:return null!=t;case E:return"number"==typeof t;case N:return"number"==typeof t&&(0|t)===t;case String:return"string"==typeof t;default:if(null==t)return!1;if("function"==typeof e){if(c.__downcastCheck(t,e))return!0}else if("object"==typeof e&&c.__isNativeObj(e)&&t instanceof e)return!0;return e==z&&null!=t.__name__||e==U&&null!=t.__ename__}},c.__downcastCheck=function(t,e){return t instanceof e||!!e.__isInterface__&&c.__interfLoop(c.getClass(t),e)},c.__cast=function(t,e){if(null==t||c.__instanceof(t,e))return t;throw r.thrown("Cannot cast "+i.string(t)+" to "+i.string(e))},c.__nativeClassName=function(t){var e=c.__toStr.call(t).slice(8,-1);return"Object"==e||"Function"==e||"Math"==e||"JSON"==e?null:e},c.__isNativeObj=function(t){return null!=c.__nativeClassName(t)},c.__resolveNativeClass=function(e){return t[e]};var u=function(){};u.__name__=!0,u.getImage=function(t){var e=new Image;return e.src=t,e};var d=function(){};d.__name__=!0,d.__isInterface__=!0;var f=function(){this.x=0,this.y=0,this.xSpeed=0,this.ySpeed=0,this.gravity=0,this.gravityDirection=0};f.__name__=!0,f.__interfaces__=[d],f.lengthDirX=function(t,e){return Math.cos(e)*t},f.lengthDirY=function(t,e){return Math.sin(e)*t},f.prototype={update:function(t,e){this.x+=this.xSpeed*e,this.y+=this.ySpeed*e,0!=this.gravity&&this.addForce(this.gravity*e,this.gravityDirection)},get_direction:function(){return Math.atan2(this.ySpeed,this.xSpeed)},get_speed:function(){return Math.sqrt(Math.pow(this.xSpeed,2)+Math.pow(this.ySpeed,2))},set_speed:function(t){var e=this.get_direction();return this.xSpeed=f.lengthDirX(t,e),this.ySpeed=f.lengthDirY(t,e),t},distanceToObject:function(t){return this.distanceToPoint(t.x,t.y)},distanceToPoint:function(t,e){return Math.sqrt(Math.pow(this.x-t,2)+Math.pow(this.y-e,2))},directionToObject:function(t){return Math.atan2(t.y-this.y,t.x-this.x)},set_room:function(t){return this.room=t},addForce:function(t,e){this.xSpeed+=f.lengthDirX(t,e),this.ySpeed+=f.lengthDirY(t,e)},drawRotation:function(t,e,i,s,r){t.save(),t.translate(this.x,this.y),t.rotate(r),t.drawImage(e,i,s),t.restore()},__class__:f};var m=function(){f.call(this),this.lifeTimer=0,this.deathTimer=0,this.forward=!0,this.alive=!0,this.reverseTimer=0,this.timeSpeed=1};m.__name__=!0,m.__super__=f,m.prototype=e(f.prototype,{update:function(t,e){this.forward?this.timeSpeed<1&&(this.timeSpeed+=m.easeTime*e,this.timeSpeed>1&&(this.timeSpeed=1)):(this.timeSpeed>-1&&(this.timeSpeed-=m.easeTime*e,this.timeSpeed<-1&&(this.timeSpeed=-1)),this.reverseTimer-=e,this.reverseTimer<=0&&(this.forward=!0)),this.alive?(this.lifeTimer+=e*this.timeSpeed,this.lifeTimer>0&&(f.prototype.update.call(this,t,e*this.timeSpeed),this.reversableUpdate(t,e*this.timeSpeed))):(f.prototype.update.call(this,t,e*this.timeSpeed),this.deathTimer+=e*this.timeSpeed,this.deathTimer<=0&&(this.alive=!0),this.deathTimer>m.maxReverseDuration&&this.room.remove(this))},reversableUpdate:function(t,e){},startReverse:function(t){this.forward=!1,this.reverseTimer=t,this.timeSpeed=0},die:function(){this.alive=!1,this.deathTimer=0},__class__:m});var p=function(t,e,i,s){null==s&&(s=0),null==i&&(i=0),m.call(this),0!=i?(this.x=t-i+Math.random()*(2*i),this.y=e-i+Math.random()*(2*i)):(this.x=t,this.y=e),this.ySpeed=s,this.addForce(5+5*Math.random(),Math.random()*(2*Math.PI)),this.alpha=1};p.__name__=!0,p.__super__=m,p.prototype=e(m.prototype,{reversableUpdate:function(t,e){m.prototype.reversableUpdate.call(this,t,e),this.alpha-=.4*e,this.alpha<=0&&e>0&&this.die(),this.alpha>1&&(this.alpha=1),t.globalAlpha=this.alpha<0?0:this.alpha,t.drawImage(u.explosionPart,this.x-8,this.y-8),t.globalAlpha=1},__class__:p});var y=function(t,e){this.objectPartition=new l,this.width=t,this.height=e,this.restart()};y.__name__=!0,y.__interfaces__=[d],y.prototype={update:function(t,e){for(var i=this.objectPartition.h,s=i,r=Object.keys(i),o=r.length,h=0;h<o;)for(var a=s[r[h++]].h;null!=a;){var n=a.item;a=a.next,n.update(t,e)}},add:function(t,e){null==e&&(e="default");var i=this.objectPartition.h[e];null==i&&(i=new h,this.objectPartition.h[e]=i),i.add(t),t.set_room(this),t.partition=e},remove:function(t,e){this.objectPartition.h[null==e?t.partition:e].remove(t),t.set_room(null),t.partition=null},getObjectIterator:function(t){null==t&&(t="default");var e=this.objectPartition.h[t];return null==e&&(e=new h,this.objectPartition.h[t]=e),new n(e.h)},restart:function(){for(var t=this.objectPartition.h,e=t,i=Object.keys(t),s=i.length,r=0;r<s;){e[i[r++]].clear()}},__class__:y};var g=function(){this.keyDown=[],window.addEventListener("keydown",R(this,this.onKeyDown)),window.addEventListener("keyup",R(this,this.onKeyUp))};g.__name__=!0,g.prototype={onKeyDown:function(t){t.preventDefault(),this.keyDown[t.keyCode]=!0},onKeyUp:function(t){t.preventDefault(),this.keyDown[t.keyCode]=!1},isKeyDown:function(t){return!(this.keyDown.length<t)&&1==this.keyDown[t]},__class__:g};var v=function(){this.canvasElement=window.document.getElementsByTagName("canvas")[0],this.context=this.canvasElement.getContext("2d",null),this.room=new w(this.canvasElement.width,this.canvasElement.height),window.requestAnimationFrame(R(this,this.onUpdate))};v.__name__=!0,v.main=function(){v.keyboard=new g,new v},v.prototype={onUpdate:function(t){var e=(t-v.lastFrame)/1e3;v.lastFrame=t,this.context.fillStyle="#000",this.context.fillRect(0,0,this.canvasElement.width,this.canvasElement.height),this.room.update(this.context,e),window.requestAnimationFrame(R(this,this.onUpdate))},__class__:v};var w=function(t,e){this.nextSet=new h,y.call(this,t,e-24),this.farBack=new T(t,e,t/4,128,12,10,"#131313"),this.nearBack=new T(t,e,t/1.5,128,15,10,"#212121"),this.bestScore=i.parseInt(window.localStorage.getItem("lcr_score")),this.lastScore=0};w.__name__=!0,w.__super__=y,w.prototype=e(y.prototype,{restart:function(){this.bestScore=i.parseInt(window.localStorage.getItem("lcr_score")),null!=this.player&&(this.lastScore=this.player.score,this.lastScore>this.bestScore&&(window.localStorage.setItem("lcr_score",i.string(this.player.score)),this.bestScore=this.lastScore)),y.prototype.restart.call(this),this.player=new b,this.add(this.player,"player"),this.waveDifficultyPerSecond=0,this.waveTimer=0,this.waveDifficultyAccumulator=0,window.addEventListener("keydown",R(this,this.checkStart)),this.menu=!0},checkStart:function(t){90==t.keyCode&&(window.removeEventListener("keydown",R(this,this.checkStart)),this.start())},start:function(){this.waveDifficultyPerSecond=.34,this.waveTimer=0,this.waveDifficultyAccumulator=0,this.createNextSet(),this.menu=!1},createNextSet:function(){this.nextSet.clear(),this.nextSetDifficulty=0;for(var t=this.waveDifficultyPerSecond*w.minSetDistance,e=this.waveDifficultyPerSecond*w.maxSetDistance,i=Math.floor(t+Math.random()*(e-t)),s=Math.ceil(3*Math.random()),r=0,o=s;r<o;){var h=r++;this.nextSetDifficulty+=this.queueEnemy(i-this.nextSetDifficulty,s-h)}this.waveDifficultyPerSecond+=.002},queueEnemy:function(t,e){var i,s=t-4*(e-1),r=0|Math.max(Math.floor(Math.random()*Math.min(t,4))+1,s);switch(r){case 1:i=new I;break;case 2:i=new P;break;case 3:i=new C;break;case 4:i=new j;break;default:return 0}for(var o=0,h=0;h<10;){h++;o=this.width/4+Math.random()*(this.width/2);for(var a=this.nextSet.h;null!=a;){var n=a.item;if(a=a.next,n.distanceToPoint(o,-16)>32)break}}return i.x=o,i.y=-16,this.nextSet.add(i),r},update:function(t,e){if(this.farBack.update(t,e),this.nearBack.update(t,e),y.prototype.update.call(this,t,e),this.waveTimer+=e,this.waveTimer>0&&(this.waveDifficultyAccumulator+this.nextSetDifficulty)/this.waveTimer<this.waveDifficultyPerSecond){for(var i=this.nextSet.h;null!=i;){var s=i.item;i=i.next;var r=s;this.add(r,"enemy")}this.waveDifficultyAccumulator+=this.nextSetDifficulty,this.createNextSet()}t.font="bold 12px Arial",t.fillStyle="#696969",t.fillRect(0,this.height,this.width,24),t.fillStyle="#0000FF";var o=.5*this.width-24;t.fillRect(4,this.height+4,o*(this.player.bombQty/3),16),t.strokeStyle="#000000";var h=4+.3333333333333333*o;t.beginPath(),t.moveTo(h,this.height+4),t.lineTo(h,this.height+20),t.stroke(),t.fillStyle=this.player.bombQty>=1?"#FFFFFF":"#000000",t.fillText("1",h-12,this.height+16);h=4+.6666666666666666*o;t.beginPath(),t.moveTo(h,this.height+4),t.lineTo(h,this.height+20),t.stroke(),t.fillStyle=this.player.bombQty>=2?"#FFFFFF":"#000000",t.fillText("2",h-12,this.height+16);h=4+o;if(t.beginPath(),t.moveTo(h,this.height+4),t.lineTo(h,this.height+20),t.stroke(),t.fillStyle=this.player.bombQty>=3?"#FFFFFF":"#000000",t.fillText("3",h-12,this.height+16),t.strokeRect(4,this.height+4,o,16),t.font="bold 20px Arial",t.fillText("Score: "+this.player.score,.5*this.width+4,this.height+20),this.menu){t.fillStyle="#000000",t.globalAlpha=.5,t.fillRect(0,0,this.width,this.height),t.globalAlpha=1,t.fillStyle="#FFFFFF",t.fillText("Press 'Z' to Start",this.width/2-t.measureText("Press 'Z' to Start").width/2,.33*this.height);var a="Best Score: "+this.bestScore;t.fillText(a,this.width/2-t.measureText(a).width/2,.66*this.height),this.lastScore>0&&(a="Last Score: "+this.lastScore,t.fillText(a,this.width/2-t.measureText(a).width/2,.66*this.height+24)),t.font="bold 15px Arial",t.fillText("Move = Arrow Keys",20,.83*this.height),t.fillText("Shoot = Z",20,.83*this.height+24),t.fillText("Chrono Bomb = X",20,.83*this.height+48),t.fillText("Focus = L Shift",20,.83*this.height+72)}},reverse:function(t){this.waveTimer-=2*t,this.farBack.startReverse(t),this.nearBack.startReverse(t)},__class__:w});var b=function(){f.call(this),this.fireTimer=0,this.graze=0,this.score=0,this.bombCooldown=0,this.bombQty=1,this.bombTimer=0,this.alive=!0};b.__name__=!0,b.__super__=f,b.prototype=e(f.prototype,{set_room:function(t){return this.x=.5*t.width,this.y=.8*t.height,f.prototype.set_room.call(this,t)},update:function(t,e){if(this.doControls(),f.prototype.update.call(this,t,e),this.alive){if(this.fireTimer+=e,v.keyboard.isKeyDown(90)&&this.fireTimer>=b.fireDelay){this.fireTimer=0;var i=new x;i.x=this.x,i.y=this.y,i.ySpeed=-400,this.room.add(i,"playerBullet")}this.bombCooldown>0&&(this.bombCooldown-=e),this.bombTimer>0&&(this.bombTimer-=e);var s=!1;v.keyboard.isKeyDown(88)&&this.bombCooldown<=0&&this.bombQty>=1&&(this.bombCooldown=4*b.bombDuration,s=!0,c.__cast(this.room,w).reverse(b.bombDuration),this.bombQty-=1,this.bombTimer=1.5*b.bombDuration);for(var r=this.room.getObjectIterator("bullet");r.hasNext();){var o=r.next();c.getClass(o)==k&&this.bulletCollide(o),s&&o instanceof m&&c.__cast(o,m).startReverse(b.bombDuration)}for(var h=this.room.getObjectIterator("enemy");h.hasNext();){var a=h.next();a instanceof M&&this.enemyCollide(a),s&&a instanceof m&&c.__cast(a,m).startReverse(b.bombDuration)}for(var n=this.room.getObjectIterator("score");n.hasNext();){var l=n.next();c.getClass(l)==S&&this.scoreCollide(l)}t.drawImage(u.player,this.x-b.grazeRadius,this.y-b.grazeRadius),this.bombTimer>0&&(t.strokeStyle="#0000FF",t.beginPath(),t.arc(this.x,this.y,2*b.grazeRadius,0,2*Math.PI),t.stroke())}},doControls:function(){var t=0,e=0;if(v.keyboard.isKeyDown(38)&&this.y>b.grazeRadius&&(e-=1),v.keyboard.isKeyDown(39)&&this.x<this.room.width-b.grazeRadius&&(t+=1),v.keyboard.isKeyDown(40)&&this.y<this.room.height-b.grazeRadius&&(e+=1),v.keyboard.isKeyDown(37)&&this.x>b.grazeRadius&&(t-=1),0!=t||0!=e){var i=Math.atan2(e,t),s=v.keyboard.isKeyDown(16)?b.focusMoveSpeed:b.baseMoveSpeed;this.xSpeed=Math.cos(i)*s,this.ySpeed=Math.sin(i)*s}else this.xSpeed=0,this.ySpeed=0},bulletCollide:function(t){this.distanceToObject(t)<b.grazeRadius+t.radius&&!t.grazed&&(t.grazed=!0,this.graze+=1,this.score+=3,this.bombQty+=1/(20*(Math.floor(this.bombQty)+1)+20*Math.floor(this.bombQty)),this.bombQty>3&&(this.bombQty=3)),this.hitCheck(t,t.radius)},enemyCollide:function(t){this.hitCheck(t,t.radius)},hitCheck:function(t,e){var i=this.distanceToObject(t);this.bombTimer>0&&i<2*b.grazeRadius&&this.room.remove(t),i<b.hitRadius+e&&(this.room.add(new p(this.x,this.y,16)),this.room.add(new p(this.x,this.y,16)),this.room.add(new p(this.x,this.y,16)),this.room.add(new p(this.x,this.y,16)),this.room.add(new p(this.x,this.y,16)),this.room.add(new p(this.x,this.y,16)),this.room.add(new p(this.x,this.y,16)),this.room.add(new p(this.x,this.y,16)),this.room.add(new p(this.x,this.y,16)),this.room.add(new p(this.x,this.y,16)),this.room.add(new p(this.x,this.y,16)),this.room.add(new p(this.x,this.y,16)),this.room.add(new p(this.x,this.y,16)),this.room.add(new p(this.x,this.y,16)),this.room.add(new p(this.x,this.y,16)),this.room.add(new p(this.x,this.y,16)),this.room.add(new p(this.x,this.y,16)),this.room.add(new p(this.x,this.y,16)),this.room.add(new p(this.x,this.y,16)),this.room.add(new p(this.x,this.y,16)),this.alive=!1,window.setTimeout(R(O=this.room,O.restart),3e3))},scoreCollide:function(t){this.distanceToObject(t)<b.grazeRadius+4&&(this.score+=Math.ceil(this.bombQty),this.room.remove(t))},__class__:b});var x=function(){f.call(this),this.radius=7};x.__name__=!0,x.__super__=f,x.prototype=e(f.prototype,{update:function(t,e){f.prototype.update.call(this,t,e),this.y<0?this.room.remove(this):t.drawImage(u.bulletPlayer,this.x-7,this.y-11)},__class__:x});var S=function(t,e){f.call(this),this.x=t,this.y=e,this.gravityDirection=.5*Math.PI,this.gravity=4,this.addForce(18,1.25*Math.PI+Math.random()*(.5*Math.PI))};S.__name__=!0,S.__super__=f,S.prototype=e(f.prototype,{update:function(t,e){f.prototype.update.call(this,t,e),this.get_speed()>18&&this.set_speed(18),t.drawImage(u.pointToken,this.x-4,this.y-4),(this.x>this.room.width+4||this.x<-4||this.y>this.room.height+4)&&this.room.remove(this)},__class__:S});var T=function(t,e,i,s,r,o,a){m.call(this),this.nodeLeft=new h,this.nodeRight=new h,this.width=t,this.viewHeight=e,this.scrollSpeed=r,this.length=e+r*(2*o),this.colour=a;var n=Math.floor(this.length/s);this.nodeMaxOffset=.4*s,this.leftNodeRoot=t/2-i/2-this.nodeMaxOffset/2,this.rightNodeRoot=t/2+i/2-this.nodeMaxOffset/2,this.nodeGap=s;for(var l=null,_=null,c=0,u=n+1;c<u;){var d=c++,f=new D;f.x=this.leftNodeRoot+Math.random()*this.nodeMaxOffset,f.y=s*d-s+Math.random()*this.nodeMaxOffset,f.parent=l,this.nodeLeft.add(f);var p=new D;p.x=this.rightNodeRoot+Math.random()*this.nodeMaxOffset,p.y=s*d-s+Math.random()*this.nodeMaxOffset,p.parent=_,this.nodeRight.add(p),l=f,_=p}};T.__name__=!0,T.__super__=m,T.prototype=e(m.prototype,{reversableUpdate:function(t,e){var i=this.scrollSpeed*e;t.fillStyle=this.colour,this.updateSide(t,i,this.nodeLeft,this.leftNodeRoot,0),this.updateSide(t,i,this.nodeRight,this.rightNodeRoot,this.width)},updateSide:function(t,e,i,s,r){for(var o=i.h;null!=o;){var h=o.item;o=o.next;var a=h;if(a.y<=0&&a.y+e>0&&e>0&&null==a.parent){var n=new D;n.x=s+Math.random()*this.nodeMaxOffset,n.y=a.y-this.nodeGap+Math.random()*this.nodeMaxOffset,i.add(n),a.parent=n}a.y+=e,a.y>this.length?i.remove(a):a.y>0&&null!=a.parent&&a.parent.y<this.viewHeight&&(t.beginPath(),t.moveTo(r,a.y+1),t.lineTo(a.x,a.y+1),t.lineTo(a.parent.x,a.parent.y-1),t.lineTo(r,a.parent.y-1),t.closePath(),t.fill())}},__class__:T});var D=function(){};D.__name__=!0,D.prototype={__class__:D};var M=function(){m.call(this),this.life=2,this.radius=16,this.value=1};M.__name__=!0,M.__super__=m,M.prototype=e(m.prototype,{set_room:function(t){if(null!=t)for(var e=t.getObjectIterator("player");e.hasNext();){var i=e.next();if(c.getClass(i)==b){this.target=i;break}}return m.prototype.set_room.call(this,t)},reversableUpdate:function(t,e){for(var i=this.room.getObjectIterator("playerBullet");i.hasNext();){var s=i.next();if(c.getClass(s)==x&&this.bulletCollide(s))return}this.draw(t),this.y>this.room.height+this.radius&&this.die()},draw:function(t){t.fillStyle="#00FF00",t.fillRect(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},bulletCollide:function(t){if(this.distanceToObject(t)<this.radius+t.radius&&(this.room.remove(t),this.life-=1,this.life<=0)){for(var e=0,i=this.value;e<i;){e++;this.room.add(new S(this.x,this.y),"score")}return this.room.add(new p(this.x,this.y,16,this.ySpeed),"particle"),this.room.add(new p(this.x,this.y,16,this.ySpeed),"particle"),this.room.add(new p(this.x,this.y,16,this.ySpeed),"particle"),this.room.add(new p(this.x,this.y,16,this.ySpeed),"particle"),this.room.add(new p(this.x,this.y,16,this.ySpeed),"particle"),this.room.remove(this),!0}return!1},__class__:M});var k=function(t,e,i){null==i&&(i=!1),null==e&&(e=8),m.call(this),this.image=t,this.radius=e,this.rotate=i,this.grazed=!1};k.__name__=!0,k.__super__=m,k.prototype=e(m.prototype,{reversableUpdate:function(t,e){this.rotate?this.drawRotation(t,this.image,-this.image.width/2,-this.image.height/2,this.get_direction()):t.drawImage(this.image,this.x-this.image.width/2,this.y-this.image.height/2),(this.x<-this.radius||this.x>this.room.width+this.radius||this.y<-this.radius||this.y>this.room.height+this.radius)&&this.die()},__class__:k});var I=function(){M.call(this),this.life=2,this.ySpeed=30,this.value=2};I.__name__=!0,I.__super__=M,I.prototype=e(M.prototype,{draw:function(t){t.drawImage(u.enemyBlocker,this.x-16,this.y-16)},__class__:I});var F=function(){M.call(this),this.shootTimer=-1};F.__name__=!0,F.__super__=M,F.prototype=e(M.prototype,{reversableUpdate:function(t,e){M.prototype.reversableUpdate.call(this,t,e),null!=this.room&&this.shootTimer>0&&this.y<.75*this.room.height&&(this.shootTimer-=e,this.shootTimer<=0&&this.shoot())},shoot:function(){},__class__:F});var P=function(){F.call(this),this.life=5,this.ySpeed=20,this.shootTimer=3,this.value=3};P.__name__=!0,P.__super__=F,P.prototype=e(F.prototype,{shoot:function(){F.prototype.shoot.call(this);var t=new k(u.bulletNormal);t.x=this.x,t.y=this.y,t.addForce(40,this.directionToObject(this.target)),this.room.add(t,"bullet"),this.shootTimer=5},draw:function(t){t.drawImage(u.enemyOneShot,this.x-16,this.y-16)},__class__:P});var C=function(){F.call(this),this.shootTimer=3,this.ySpeed=20,this.value=4};C.__name__=!0,C.__super__=F,C.prototype=e(F.prototype,{shoot:function(){F.prototype.shoot.call(this);var t,e=this.directionToObject(this.target)-.5;(t=new k(u.bulletNormal)).x=this.x,t.y=this.y,t.addForce(30,e+0),this.room.add(t,"bullet"),(t=new k(u.bulletNormal)).x=this.x,t.y=this.y,t.addForce(30,e+.5),this.room.add(t,"bullet"),(t=new k(u.bulletNormal)).x=this.x,t.y=this.y,t.addForce(30,e+1),this.room.add(t,"bullet"),this.shootTimer=7},draw:function(t){t.drawImage(u.enemyThreeShot,this.x-16,this.y-16)},__class__:C});var O,j=function(){F.call(this),this.life=5,this.ySpeed=20,this.shootTimer=5,this.shootQty=10,this.targetDirection=0,this.value=5};function R(e,i){return null==i?null:(null==i.__id__&&(i.__id__=t.$haxeUID++),null==e.hx__closures__?e.hx__closures__={}:s=e.hx__closures__[i.__id__],null==s&&(s=i.bind(e),e.hx__closures__[i.__id__]=s),s);var s}j.__name__=!0,j.__super__=F,j.prototype=e(F.prototype,{draw:function(t){t.drawImage(u.enemyTunnelShooter,this.x-16,this.y-16)},shoot:function(){F.prototype.shoot.call(this),this.ySpeed>0&&(this.ySpeed=0,this.targetDirection=this.directionToObject(this.target),this.lx=f.lengthDirX(16,this.targetDirection+Math.PI/2),this.ly=f.lengthDirY(16,this.targetDirection+Math.PI/2),this.rx=f.lengthDirX(16,this.targetDirection-Math.PI/2),this.ry=f.lengthDirY(16,this.targetDirection-Math.PI/2));var t=new k(u.bulletSmall,4,!0);t.x=this.x+this.lx,t.y=this.y+this.ly,t.addForce(30,this.targetDirection),this.room.add(t,"bullet");var e=new k(u.bulletSmall,4,!0);e.x=this.x+this.rx,e.y=this.y+this.ry,e.addForce(30,this.targetDirection),this.room.add(e,"bullet"),this.shootQty-=1,this.shootQty<=0?(this.shootTimer=5,this.shootQty=10,this.ySpeed=20):this.shootTimer=.4},__class__:j}),t.$haxeUID|=0,String.prototype.__class__=String,String.__name__=!0,Array.__name__=!0;var N={},A={},E=Number,Q=Boolean,z={},U={};c.__toStr={}.toString,u.player=u.getImage("res/pla.png"),u.bulletPlayer=u.getImage("res/bpl.png"),u.pointToken=u.getImage("res/scr.png"),u.explosionPart=u.getImage("res/exp.png"),u.bulletNormal=u.getImage("res/bno.png"),u.bulletSmall=u.getImage("res/bsm.png"),u.enemyBlocker=u.getImage("res/ebl.png"),u.enemyOneShot=u.getImage("res/ess.png"),u.enemyThreeShot=u.getImage("res/ets.png"),u.enemyTunnelShooter=u.getImage("res/etl.png"),m.maxReverseDuration=10,m.easeTime=.5,v.lastFrame=0,w.maxSetDistance=10,w.minSetDistance=3,b.baseMoveSpeed=80,b.focusMoveSpeed=50,b.grazeRadius=16,b.hitRadius=2,b.fireDelay=.5,b.bombDuration=5,v.main()}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);